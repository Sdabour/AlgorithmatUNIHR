@using AlgorithmatMVC.UNI.UNIBusiness;
@using SharpVision.UMS.UMSBusiness;

@{
    ViewBag.Title = "RegisterationExam";
    Layout = "~/Views/Shared/_LayoutS.cshtml";
}
<link href="~/Content/Modal.css" rel="stylesheet" />
<script src="~/Scripts/UMS/User.js"></script>
<script src="~/wwwroot/js/main/jquery.min.js"></script>
<script src="~/Scripts/UNI/Course.js"></script>
<script src="~/Scripts/bootstrap.js"></script>
<script src="~/Scripts/UNI/Exam.js"></script>
<script src="~/Scripts/UNI/RegisterationExam.js"></script>
<script src="~/Scripts/UNI/RegisterationExamJS.js"></script>
<script src="~/Scripts/UNI/Semester.js"></script>
<script src="~/Scripts/Applicant.js"></script>
<script src="~/Scripts/UNI/Regestration.js"></script>


<script type="text/javascript">
    $(document).ready(function () {


        InitializeEmployeeModal();


    });
</script>
<div class="form-row" id="rowSemester">
    <div class="col">
        @{
            SemesterSimple objSemester = SemesterBiz.LastSemesterBiz.GetSimple();
            string strTemp = Json.Encode(objSemester);
            string strAllCoursesAuthorized = UserBiz.CurrentUser.UserFunctionInstantCol.GetIndex(ExamBiz.UMSAllCourses) != -1 ? "1" : "0";
            string strAllExamTypeAuthorized = UserBiz.CurrentUser.UserFunctionInstantCol.GetIndex(ExamBiz.UMSAllExamType) != -1 ? "1" : "0";
            int intFaculty = 0;
            string strFaculty = "";
            FacultySimple objFaculty = new FacultySimple();
            if (Session["CurrentFaculty"] != null)
            {
                strFaculty = Session["CurrentFaculty"].ToString();
                objFaculty = Json.Decode<FacultySimple>(strFaculty);
            }

            intFaculty = objFaculty.ID;

            string strAsignedCourseCode = "ExamCourseFaculty" + intFaculty.ToString();
            string strAssignedCourse, strAssignedType;
            AssignmentObjectBiz objAssignmentBiz = new AssignmentObjectBiz(strAsignedCourseCode);
            UserObjectAssignmentCol objAssignedCol = objAssignmentBiz.GetAllAssignedObjectCol(UserBiz.CurrentUser);
            List<int> lstIDs = objAssignedCol.Cast<UserObjectAssignmentBiz>().Select(x => x.ObjectValue).ToList();
            strAssignedCourse = Json.Encode(lstIDs);

            objAssignmentBiz = new AssignmentObjectBiz("ExamType");
            objAssignedCol = objAssignmentBiz.GetAllAssignedObjectCol(UserBiz.CurrentUser);
            lstIDs = objAssignedCol.Cast<UserObjectAssignmentBiz>().Select(x => x.ObjectValue).ToList();
            strAssignedType = Json.Encode(lstIDs);
        }
        <input type="hidden" id="lblSemester" value=" @strTemp" />
        <input type="hidden" id="lblAllExamAuthorized" value=" @strAllExamTypeAuthorized" />
        <input type="hidden" id="lblAllCoursesAuthorized" value=" @strAllCoursesAuthorized" />
        <input type="hidden" id="lblAssignedCourse" value=" @strAssignedCourse" />
        <input type="hidden" id="lblAssignedType" value=" @strAssignedType" />
        <label style="background-color:azure;text-align:center;font-size:large;">@objSemester.Desc</label>
    </div>
</div>
<div class="form-row" id="rowExamSearch">
    <div class="col">
        @{ Html.RenderPartial("../control/ExamSimpleSearch");}
    </div>
</div>
<div class="row pt-1" id="rowEmployee">
    <div class="col">

        @{



            Html.RenderPartial("EmployeeSearch");
        }
    </div>
</div>
<div class="row pt-1">
    <div class="col-1">
        ترتيب بالاسم
    </div>
    <div class="col-1">
        <input type="checkbox" id="chkOrderByName" />
    </div>
    <div class="col-4">


    </div>
    <div class="col-2">

        <input type="button" id="btnSaveAll" class="success" value="Save All" onclick="SaveRegisterationExamCol(); return false;" />
    </div>
    <div class="col-2">

    </div>
    <div class="col-2">

        <input type="button" id="btnPrint" class="success" value="Print" onclick="OnRegisterationExamDownloadClick(); return false;" />
    </div>
</div>
<input type="hidden" id="lblExamIDs" value="[]">
<div class="table-responsive" id="tblRegExam">

</div>
