@using SharpVision.UMS.UMSBusiness;
@{
    Layout = null;
}

<!DOCTYPE html>

<html dir="rtl">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
   

    <title>ALGORITHMAT</title>

    <!-- Bootstrap core CSS -->
    <link href=@Url.Content("~/vendor/bootstrap/css/bootstrap.min.css") rel="stylesheet">

   
    <link rel="stylesheet" href=@Url.Content("~/assets/css/fontawesome.css")>
    <link rel="stylesheet" href=@Url.Content( "~/assets/css/templatemo-style.css")>
    <link rel="stylesheet" href="~/assets/css/owl.css">

</head>

<body class="is-preload">
    @{
        #region
        int intSystem = 6;
        string strSys = System.Configuration.ConfigurationManager.AppSettings["SysID"];
        if (strSys != null)
        {
            int.TryParse(strSys, out intSystem);
        }
        UserBiz objUserBiz = (UserBiz)Session["CurrentUser"];
        UserBiz.CurrentUser = objUserBiz;
        SystemBiz objSystemBiz = new SystemBiz() { ID = intSystem };
        MenuNodeCol _NodeCol = objSystemBiz.NodeCol.AuthorisedMainNodeCol;
        MenuNodeCol objNodeCol = new MenuNodeCol();
        object objController = new object();

        ViewContext.RouteData.Values.TryGetValue("controller", out objController);


        if (!_NodeCol.CheckNodeName(objController.ToString()))
        {
            Response.Redirect(@"~/Login/Index");

        }
        string FillNode()
        {
            string Returned = FillNodeCol("", _NodeCol);

            return Returned;
        }
        string FillNodeCol(string strText,MenuNodeCol objCol)
        {
            string Returned = "";
            if (strText != "")
            {
                Returned += @"  <span class=""opener"">" + strText + @"</span>";
                Returned += "<ul>";
            }

            string strUrl = "";
            foreach (MenuNodeBiz objNodeBiz in objCol)
            {
                Returned += "<li>";
                if (objNodeBiz.Children.Count == 0)
                {
                    strUrl = Request.Url.Scheme + "://" + Request.Url.Authority + "/" + objNodeBiz.FunctionBiz.Url;
                    Returned += "<a href='" + strUrl + "'>" + objNodeBiz.Name + "</a>";
                }
                else
                    Returned += FillNodeCol(objNodeBiz.Name, objNodeBiz.Children);
                Returned += "</li>";
            }
            if (strText != "")
                Returned += "</ul>";
            return Returned;
        }
        #endregion
    }

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Main -->
     

        <!-- Sidebar -->
        <div id="sidebar">

            <div class="inner">

                <!-- Search Box -->
                <section id="search" class="alt">
                    <form method="get" action="#">
                        <input type="text" name="search" id="search" placeholder="Search..." />
                    </form>
                </section>

                <!-- Menu -->
                <nav id="menu">
                    <ul>
                        @(new HtmlString(FillNode()))
                      
                     
                    </ul>
                </nav>

                <!-- Featured Posts -->
                <div class="featured-posts">
              <a href="~/LogIn/logOut">Log out</a>
                 </div>

                <!-- Footer -->
                <footer id="footer">
                   
                </footer>

            </div>
        </div>
        @RenderBody()
    </div>

    <!-- Scripts -->
    <!-- Bootstrap core JavaScript -->
    <script src="~/vendor/jquery/jquery.min.js"></script>
    <script src="~/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="~/assets/js/browser.min.js"></script>
    <script src="~/assets/js/breakpoints.min.js"></script>
    <script src="~/assets/js/transition.js"></script>
    <script src="~/assets/js/owl-carousel.js"></script>
    <script src="~/assets/js/custom.js"></script>
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
  
 
</body>

</html>
